<div class="card">
  <h1 class="text-center">Listings</h1>
    <div class="container">
    <div class="row">
      <div class="xs-col-12">
          <%= form_tag locations_path, :method => :get do %>
          <div class="form-inline">
            <%= select_tag :category, options_for_select(['Accommodation','Bar/cafe','Cinema','Cultural site','Museum','Park','Public transport','Restaurant']), prompt: "Choose a category", class: "form-control" %>
          <%= text_field_tag(:name, nil, placeholder: "Enter location name", class: "form-control") %>
          <%= submit_tag "Search", :name => nil, class: "btn btn-primary" %>
          </div>
          <div class="padded-small">
          <p><span class="padding-left">Wheelchair access </span> <%= check_box_tag(:wheelchair_access) %>
          <span class="padding-left">Step-free access </span> <%= check_box_tag(:step_free_access) %>
          <span class="padding-left">Automatic doors </span> <%= check_box_tag(:automatic_doors) %>
          <span class="padding-left">Disabled parking </span> <%= check_box_tag(:disabled_parking) %>
          <span class="padding-left">Accessible toilets </span> <%= check_box_tag(:accessible_toilets) %></p>
        </div>
        <% end %>
      </div>
    </div>
    </div>
  </div>
  <div class="card">
    <div class="row">
      <div class="col-xs-6">
      <%= will_paginate @locations, :class => 'digg_pagination padding-left' %>
        <div class="listing text-center">
          <div class="row">
          <% @locations.each do |location| %>
            <div class="col-xs-6">
              <p class="location-details"><%= location.name %></p>
              <% if location.photo? %>
              <%= image_tag location.photo.url(:thumb), :class=> "img-show" %>
              <% else %>
              <%= image_tag 'placeholder.jpg', height: '100px', :class=> "img-show" %>
              <% end %>
              <p><%= link_to "View location", location_path(location), class: "btn btn-primary" %></p>
              </div>
            <% end %>
            </div>
          </div>
        </div>
      <div class="col-xs-6">
      <!-- %= image_tag 'map-placeholder.png', width: '80%' %> -->
      <div id="map" style="width: 95%; height: 600px;"></div>

    <% content_for(:after_js) do %>
    <%= javascript_tag do %>
    $(document).on('ready', function() {
      handler = Gmaps.build('Google');
      handler.buildMap({ internal: { id: 'map' } }, function(){
        markers = handler.addMarkers(<%= raw @markers.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
    })
  <% end %>
<% end %>

    </div>
  <i class="fa fa-chevron-circle-left"></i><%= link_to "Back", :back %>
</div>
</div>
</div>
